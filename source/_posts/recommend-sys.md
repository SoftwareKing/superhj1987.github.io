# 推荐系统杂谈

推荐系统的一些普遍性目标如下：

- 用户满意性： 首当其冲
- 多样性
- 新颖性
- 惊喜度
- 实时性
- 推荐透明度
- 覆盖率

基于这些目标，推荐系统应该包括四种推荐方式：

- 热门推荐：就是热门排行榜的概念。这种推荐方式不仅仅在IT系统，在平常的生活中也是处处存在的。应该是效果最好的一种推荐方式。毕竟热门推荐的物品都是位于曝光量比较高的位置的。
- 人工推荐：人工干预的推荐内容。相比于依赖热门和算法来进行推荐。一些热点时事如世界杯、nba总决赛等就需要人工加入推荐列表。另一方面，热点新闻带来的效果也是很高的。
- 相关推荐：相关推荐有点类似于关联规则的个性化推荐，就是在你阅读一个内容的时候，会提示你阅读与此相关的内容。
- 个性化推荐：基于用户的历史行为做出的内容推荐。也是本文主要讲述的内容。

其中，前三者是和机器学习没有任何关系的，但却是推荐效果最好的三种方式。一般说来，这部分内容应该占到总的推荐内容的80%左右，另外20%则是对长尾内容的个性化推荐。


## 个性化推荐概述

个性化推荐是机器学习应用的一个典型场景。在本质上和搜索引擎是一样的，同样是为了解决信息过载的问题。搜索引擎某种意义上也是一个个性化推荐系统，但是其输入特征是可以从搜索关键字直接可以得到的。而一般的推荐系统，输入特征则是需要机器学习才能得到。

个性化推荐系统一般由日志系统、推荐算法、内容展示UI三部分组成。

- 日志系统：这是推荐系统的输入源，是一个推荐系统所有信息的源头。
- 推荐算法：这是推荐系统的核心，根据输入数据得出最终的推荐结果的具体过程就在这里。
- 内容展示UI：对于推荐结果如何展示，也是一个值得权衡的地方。以更好地满足推荐系统的目标，并能更好的收集用户的行为信息等。

其中，个性化推荐中最为核心的推荐算法，目前比较流行的有以下几种：

- 基于内容的推荐：根据内容本身的属性(特征向量)所作的推荐。
- 基于关联规则的推荐：“啤酒与尿布”的方式，是一种动态的推荐，能够实时对用户的行为作出推荐。是基于物品之间的特征关联性所做的推荐，在某种情况下会退化为物品协同过滤推荐。
- 协同过滤推荐：与基于关联规则的推荐相比是一种静态方式的推荐，是根据用户已有的历史行为作分析的基础上做的推荐。可分为物品协同过滤、用户协同过滤、基于模型的协同过滤。其中，基于模型的协同又可以分为以下几种类型：基于距离的协同过滤；基于矩阵分解的协同过滤，即Latent Factor Model(SVD)；基于图模型协同，即Graph，也叫社会网络图模型。

个性化推荐系统的典型架构如下图所示：

![recommend-sys](/images/blog_images/recommend-sys-arch.png)

在线业务系统的日志接入数据高速公路，再由数据高速公路迅速运转到离线数据处理平台和在线流计算平台；离线数据处理平台周期性地以批处理方式加工过去一段时间的数据，得到人群标签和其他模型参数，存放在高速缓存中，供在线业务系统使用，与此同时，在线流计算平台实时对线上的日志数据做处理，对离线计算出的数据进行补充、修正等；在线业务系统综合离线特征和在线特征使用一定的逻辑得到输出供业务使用，产生的日志流入数据高速公路。

基于此框架，个性化推荐系统的典型流程如下：

![recommend-sys](/images/blog_images/recommend-sys.png)

综上，可知推荐系统的核心就在于推荐算法的选择。本文基于基于内容的个性化推荐对推荐系统进行阐述。

## 基于内容以及用户画像的个性化推荐

考虑到推荐算法的复杂性以及不可预测性。使用基于内容的推荐方案，即根据内容特征向量和用户特征向量来做特征匹配，从而推荐相关内容。

### 标签库

### 内容特征-文本分析方法

分词：结巴分词;中科院ICTCLAS
决策树：随机森林、xgboost等
贝叶斯分类：基于概率，朴素贝叶斯分类
TFIDF: 文本向量化，提取文本关键词
余弦相似度：与TFIDF结合能够计算文本相似度，两个文章各取n个关键词，得到2n个关键词，分别统计词频，得到词频向量，使用余弦相似度计算即可
WordToVec：词的相似度计算
TextRank: 类似PageRank（有指向连接则权重越高、指向别处的连接越多权重越低、指向自己的网站的权重越高则权重越高）的原理。单词之间，在一个窗口(窗口大小可以指定)中则存在一个无向无权的边。提取摘要则根据句子与句子的相似度来做。

### 用户特征-用户画像

给用户打标签

### 推荐

## 用户协同过滤推荐